<ng-template #productsGrid>
<div *ngIf="mode === 'cartView'" class="main-layout">
    <div class="products-list">
        <app-product-card
            *ngFor="let product of products"
            [product]="product"
            [mode]="productListOptionsEnum.CartView"
            (removeClicked)="removeClicked.emit($event)"
        ></app-product-card>
    </div>
</div>

<div *ngIf="mode === 'publicView' || mode === 'customerView' || mode === 'adminView'" class="products-list-view">
    <app-product-card *ngFor="let product of products" [product]="product" [mode]="mode"></app-product-card>
</div>

<!-- the -1 with the page is because the primeng start from 0 -->
<p-paginator
    class="fixed-bottom"
    [rows]="limit"
    [totalRecords]="totalRecords"
    (onPageChange)="loadProducts($event)"
    [first]="(page - 1) * limit"
    styleClass="mt-4"
/> 

</ng-template>
<div class="overlay" *ngIf="loading" aria-busy="true" aria-live="polite">
  <p-progressSpinner strokeWidth="4"></p-progressSpinner>
  <div class="overlay-text">Loading Products...</div>
</div>


<ng-container *ngIf="loading; else productsGrid">
  <div class="products-grid skeleton-grid">
    <div class="card-skeleton" *ngFor="let _ of skeletonItems">
      <div class="img shimmer"></div>
      <div class="body">
        <div class="line shimmer w-70"></div>
        <div class="line shimmer w-50"></div>
        <div class="line shimmer w-30"></div>
        <div class="btn shimmer w-40"></div>
      </div>
    </div>
  </div>
</ng-container>



